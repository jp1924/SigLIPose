{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "SigLIPose Training Debug",
            "type": "debugpy",
            "request": "launch",
            "module": "deepspeed.launcher.runner",
            "console": "integratedTerminal",
            "cwd": "/home/jp/workspace/SigLIPose/src",
            "env": {
                "WANDB_PROJECT": "pose-estimation",
                "WANDB_RUN_GROUP": "SigLIPose",
                "WANDB_WATCH": "",
                "TORCH_DISTRIBUTED_DEBUG": "OFF",
                "TORCHDYNAMO_DISABLE": "1",
                "PYTORCH_CUDA_ALLOC_CONF": "expandable_segments:True,roundup_power2_divisions:[32:256,64:128,256:64,>:32]",
                "CUDA_DEVICE_ORDER": "PCI_BUS_ID",
                "OMP_NUM_THREADS": "2",
                "ACCELERATE_USE_FSDP": "true",
                "FSDP_VERSION": "2",
                "FSDP_RESHARD_AFTER_FORWARD": "true",
                "FSDP_STATE_DICT_TYPE": "FULL_STATE_DICT",
                "FSDP_AUTO_WRAP_POLICY": "TRANSFORMER_BASED_WRAP",
                "FSDP_CPU_RAM_EFFICIENT_LOADING": "false",
                "FSDP_ACTIVATION_CHECKPOINTING": "false"
            },
            "args": [
                "/home/jp/workspace/SigLIPose/src/main.py",
                "--output_dir=/home/jp/output_dir/SigLIPose2/train",
                "--run_name=pose-estimation",
                "--per_device_train_batch_size=4",
                "--gradient_accumulation_steps=1",
                "--per_device_eval_batch_size=4",
                "--eval_accumulation_steps=1",
                "--num_train_epochs=2",
                "--seed=42",
                "--do_train=true",
                "--do_eval=false",
                "--do_predict=false",
                "--report_to=none",
                "--learning_rate=2e-5",
                "--lr_scheduler_type=cosine",
                "--warmup_ratio=0.03",
                "--weight_decay=0",
                "--eval_strategy=no",
                "--eval_steps=1",
                "--save_strategy=epoch",
                "--save_steps=500",
                "--logging_strategy=steps",
                "--logging_steps=1",
                "--bf16=true",
                "--tf32=true",
                "--ddp_timeout=18000000",
                "--gradient_checkpointing=true",
                "--gradient_checkpointing_kwargs={\"use_reentrant\": false}",
                "--dataloader_prefetch_factor=5",
                "--dataloader_num_workers=4",
                "--torch_dtype=bfloat16",
                "--remove_unused_columns=true"
            ],
            "justMyCode": false,
            "purpose": ["debug-in-terminal"]
        },
        {
            "name": "SigLIPose Training Debug (Single GPU)",
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/src/main.py",
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "env": {
                "WANDB_PROJECT": "LLM",
                "WANDB_RUN_GROUP": "packing-test",
                "WANDB_WATCH": "",
                "TORCH_DISTRIBUTED_DEBUG": "OFF",
                "TORCHDYNAMO_DISABLE": "1",
                "PYTORCH_CUDA_ALLOC_CONF": "expandable_segments:True,roundup_power2_divisions:[32:256,64:128,256:64,>:32]",
                "CUDA_DEVICE_ORDER": "PCI_BUS_ID",
                "OMP_NUM_THREADS": "2",
                "CUDA_VISIBLE_DEVICES": "0"
            },
            "args": [
                "--output_dir=/home/jp/output_dir/SigLIPose2/train_debug",
                "--run_name=sft_debug",
                "--per_device_train_batch_size=1",
                "--gradient_accumulation_steps=1",
                "--per_device_eval_batch_size=1",
                "--eval_accumulation_steps=1",
                "--num_train_epochs=1",
                "--seed=42",
                "--do_train=true",
                "--do_eval=false",
                "--do_predict=false",
                "--report_to=none",
                "--learning_rate=2e-5",
                "--lr_scheduler_type=cosine",
                "--warmup_ratio=0.03",
                "--weight_decay=0",
                "--eval_strategy=no",
                "--eval_steps=1",
                "--save_strategy=no",
                "--save_steps=500",
                "--logging_strategy=steps",
                "--logging_steps=1",
                "--bf16=false",
                "--tf32=true",
                "--ddp_timeout=18000000",
                "--gradient_checkpointing=false",
                "--dataloader_prefetch_factor=2",
                "--dataloader_num_workers=1",
                "--torch_dtype=float32",
                "--remove_unused_columns=true"
            ],
            "justMyCode": false,
            "purpose": ["debug-in-terminal"]
        },
        {
            "name": "SigLIPose Inference Debug",
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/src/main.py",
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "env": {
                "WANDB_PROJECT": "LLM",
                "WANDB_RUN_GROUP": "inference-test",
                "WANDB_WATCH": "",
                "TORCH_DISTRIBUTED_DEBUG": "OFF",
                "TORCHDYNAMO_DISABLE": "1",
                "PYTORCH_CUDA_ALLOC_CONF": "expandable_segments:True,roundup_power2_divisions:[32:256,64:128,256:64,>:32]",
                "CUDA_DEVICE_ORDER": "PCI_BUS_ID",
                "OMP_NUM_THREADS": "2",
                "CUDA_VISIBLE_DEVICES": "0"
            },
            "args": [
                "--output_dir=/home/jp/output_dir/SigLIPose2/inference",
                "--run_name=inference",
                "--per_device_eval_batch_size=1",
                "--eval_accumulation_steps=1",
                "--seed=42",
                "--do_train=false",
                "--do_eval=false",
                "--do_predict=true",
                "--report_to=none",
                "--bf16=false",
                "--tf32=true",
                "--dataloader_prefetch_factor=2",
                "--dataloader_num_workers=1",
                "--torch_dtype=float32",
                "--remove_unused_columns=true"
            ],
            "justMyCode": false,
            "purpose": ["debug-in-terminal"]
        },
        {
            "name": "SigLIPose Quick Test",
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/src/main.py",
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "env": {
                "WANDB_PROJECT": "LLM",
                "WANDB_RUN_GROUP": "quick-test",
                "WANDB_WATCH": "",
                "TORCH_DISTRIBUTED_DEBUG": "INFO",
                "TORCHDYNAMO_DISABLE": "1",
                "PYTORCH_CUDA_ALLOC_CONF": "expandable_segments:True",
                "CUDA_DEVICE_ORDER": "PCI_BUS_ID",
                "OMP_NUM_THREADS": "1",
                "CUDA_VISIBLE_DEVICES": "0"
            },
            "args": [
                "--output_dir=/home/jp/output_dir/SigLIPose2/quick_test",
                "--run_name=quick_test",
                "--per_device_train_batch_size=1",
                "--gradient_accumulation_steps=1",
                "--per_device_eval_batch_size=1",
                "--max_steps=10",
                "--seed=42",
                "--do_train=true",
                "--do_eval=false",
                "--do_predict=false",
                "--report_to=none",
                "--learning_rate=2e-5",
                "--lr_scheduler_type=linear",
                "--warmup_steps=2",
                "--weight_decay=0",
                "--eval_strategy=no",
                "--save_strategy=no",
                "--logging_strategy=steps",
                "--logging_steps=1",
                "--bf16=false",
                "--tf32=false",
                "--gradient_checkpointing=false",
                "--dataloader_prefetch_factor=1",
                "--dataloader_num_workers=0",
                "--torch_dtype=float32",
                "--remove_unused_columns=true"
            ],
            "justMyCode": false,
            "purpose": ["debug-in-terminal"]
        }
    ]
}
